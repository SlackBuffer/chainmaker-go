#
# Copyright (C) BABEC. All rights reserved.
# Copyright (C) THL A29 Limited, a Tencent company. All rights reserved.
#
# SPDX-License-Identifier: Apache-2.0
#

chain_id: {chain_id}    # 链标识
version: v1.0.0         # 链版本
sequence: 1             # 配置版本
auth_type: "identity"   # 认证类型

crypto:
  hash: SHA256

# 交易、区块相关配置
block:
  tx_timestamp_verify: true # 是否需要开启交易时间戳校验
  tx_timeout: 600  # 交易时间戳的过期时间(秒)sync_store: true # 切换存储实现，是否启用异步存储机制
  block_tx_capacity: 50000  # 区块中最大交易数
  block_size: 10  # 区块最大限制，单位MB
  block_interval: 10 # 出块间隔，单位:ms

# core模块
core:
  tx_scheduler_timeout: 10 #  [0, 60] 交易调度器从交易池拿到交易后, 进行调度的时间
  tx_scheduler_validate_timeout: 10 # [0, 60] 交易调度器从区块中拿到交易后, 进行验证的超时时间

#共识配置
consensus:
  # 共识类型(0-SOLO,1-TBFT,2-MBFT,3-HOTSTUFF,4-RAFT,10-POW)
  type: {consensus_type}
  # 共识节点列表，组织必须出现在trust_roots的org_id中，每个组织可配置多个共识节点，节点地址采用libp2p格式
  nodes:
    - org_id: "{org1_id}"
      address:
        - "/ip4/172.16.16.12/tcp/{org1_port}/p2p/{org1_peerid}"
    - org_id: "{org2_id}"
      address:
        - "/ip4/172.16.16.12/tcp/{org2_port}/p2p/{org2_peerid}"
    - org_id: "{org3_id}"
      address:
        - "/ip4/172.16.16.12/tcp/{org3_port}/p2p/{org3_peerid}"
    - org_id: "{org4_id}"
      address:
        - "/ip4/172.16.16.12/tcp/{org4_port}/p2p/{org4_peerid}"
    - org_id: "{org5_id}"
      address:
        - "/ip4/172.16.16.8/tcp/{org5_port}/p2p/{org5_peerid}"
    - org_id: "{org6_id}"
      address:
        - "/ip4/172.16.16.8/tcp/{org6_port}/p2p/{org6_peerid}"
    - org_id: "{org7_id}"
      address:
        - "/ip4/172.16.16.8/tcp/{org7_port}/p2p/{org7_peerid}"
    - org_id: "{org8_id}"
      address:
        - "/ip4/172.16.16.8/tcp/{org8_port}/p2p/{org8_peerid}"
    - org_id: "{org9_id}"
      address:
        - "/ip4/172.16.16.11/tcp/{org9_port}/p2p/{org9_peerid}"
    - org_id: "{org10_id}"
      address:
        - "/ip4/172.16.16.11/tcp/{org10_port}/p2p/{org10_peerid}"
    - org_id: "{org11_id}"
      address:
        - "/ip4/172.16.16.11/tcp/{org11_port}/p2p/{org11_peerid}"
    - org_id: "{org12_id}"
      address:
        - "/ip4/172.16.16.11/tcp/{org12_port}/p2p/{org12_peerid}"
    - org_id: "{org13_id}"
      address:
        - "/ip4/172.16.16.10/tcp/{org13_port}/p2p/{org13_peerid}"
    - org_id: "{org14_id}"
      address:
        - "/ip4/172.16.16.10/tcp/{org14_port}/p2p/{org14_peerid}"
    - org_id: "{org15_id}"
      address:
        - "/ip4/172.16.16.10/tcp/{org15_port}/p2p/{org15_peerid}"
    - org_id: "{org16_id}"
      address:
        - "/ip4/172.16.16.10/tcp/{org16_port}/p2p/{org16_peerid}"
  ext_config: # 扩展字段，记录难度、奖励等其他类共识算法配置
    - key: aa
      value: chain01_ext11

# 信任组织和根证书
trust_roots:
  - org_id: "{org1_id}"
    root: "./certs/ca/{org1_id}/ca.crt"
  - org_id: "{org2_id}"
    root: "./certs/ca/{org2_id}/ca.crt"
  - org_id: "{org3_id}"
    root: "./certs/ca/{org3_id}/ca.crt"
  - org_id: "{org4_id}"
    root: "./certs/ca/{org4_id}/ca.crt"
  - org_id: "{org5_id}"
    root: "./certs/ca/{org5_id}/ca.crt"
  - org_id: "{org6_id}"
    root: "./certs/ca/{org6_id}/ca.crt"
  - org_id: "{org7_id}"
    root: "./certs/ca/{org7_id}/ca.crt"
  - org_id: "{org8_id}"
    root: "./certs/ca/{org8_id}/ca.crt"
  - org_id: "{org9_id}"
    root: "./certs/ca/{org9_id}/ca.crt"
  - org_id: "{org10_id}"
    root: "./certs/ca/{org10_id}/ca.crt"
  - org_id: "{org11_id}"
    root: "./certs/ca/{org11_id}/ca.crt"
  - org_id: "{org12_id}"
    root: "./certs/ca/{org12_id}/ca.crt"
  - org_id: "{org13_id}"
    root: "./certs/ca/{org13_id}/ca.crt"
  - org_id: "{org14_id}"
    root: "./certs/ca/{org14_id}/ca.crt"
  - org_id: "{org15_id}"
    root: "./certs/ca/{org15_id}/ca.crt"
  - org_id: "{org16_id}"
    root: "./certs/ca/{org16_id}/ca.crt"

# 权限配置（只能整体添加、修改、删除）
permissions:
  - resource_name: NODE_ADDR_UPDATE
    principle:
      rule: SELF # 规则（ANY，MAJORITY...，全部大写，自动转大写）
      org_list: # 组织名称（组织名称，区分大小写）
      role_list: # 角色名称（role，自动转大写）
        - admin
  - resource_name: TRUST_ROOT_UPDATE
    principle:
      rule: SELF # 规则（ANY，MAJORITY...，全部大写）
      org_list: # 组织名称（组织名称）
      role_list: # 角色名称（role，自动转大写）
        - admin
  - resource_name: CONSENSUS_EXT_DELETE
    principle:
      rule: MAJORITY
      org_list:
      role_list:
        - admin
  - resource_name: BLOCK_UPDATE
    principle:
      rule: ANY
      org_list:
      role_list:
        - admin
        - client
  - resource_name: user_contract_create_method
    principle:
      rule: ANY
      org_list:
      role_list:
async_store: true # 切换存储实现，是否启用异步存储机制
